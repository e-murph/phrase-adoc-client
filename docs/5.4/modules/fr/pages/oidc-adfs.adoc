= OpenID Connect (OIDC) pour ADFS
:revdate: 2024-09-27
:page-revdate: {revdate}
:page-opendocs-origin: /08.integration/08.oidc_adfs/08.oidc_adfs.md
:page-opendocs-slug:  /integration/oidc_adfs

== Intégration avec OpenID Connect (OIDC) pour ADFS

Dans AD FS Management, cliquez sur "Application Groups" et ensuite sur "Add Application Group...".

image:adfs1.png[adfs]

Entrez un nom, sélectionnez "Server application accessing a web API" et cliquez sur Next.

image:adfs2.png[adfs]

Saisissez l'URI de redirection sur la page {product-name} Settings > OpenID Connect Setting, puis cliquez sur Next.

image:adfs3.png[adfs]

Cochez la case "Générer un secret partagé", puis cliquez sur "Suivant".

image:adfs4.png[adfs]

Saisissez l'identifiant créé à l'étape précédente, puis cliquez sur Suivant.

image:adfs5.png[adfs]

image:adfs6.png[adfs]

Activez les champs d'application allatclaims, email, openid et profil, puis cliquez sur Suivant.

image:adfs7.png[adfs]

image:adfs8.png[adfs]

image:adfs9.png[adfs]

Double-cliquez sur un groupe d'application que vous avez créé précédemment

image:adfs10.png[adfs]

Double-cliquez sur l'API Web et cliquez sur l'onglet Règles de transformation des émissions.

image:adfs11.png[adfs]

Cliquez sur Add Rule... et sélectionnez "Send LDAP Attributes as Claims", puis cliquez sur Next.

image:adfs12.png[adfs]

Entrez un nom de règle de réclamation, choisissez Active Directory comme magasin d'attributs et fournissez le mappage des attributs LDAP aux types de réclamations sortantes comme suit

* Token-Groups -- Noms non qualifiés -> groups
* Nom d'utilisateur principal -> nom_d'utilisateur_préféré
* Adresse électronique -> email

image:adfs13.png[adfs]

image:adfs14.png[adfs]

=== {product-name} Mise en place

* Émetteur du fournisseur d'identité : "https://<adfs-fqdn>/adfs"
* ID du client : Il s'agit d'un "identificateur de client" qui apparaît dans la boîte de dialogue "Application serveur" de l'assistant "Ajouter un groupe d'applications"
* Secret du client : Il s'agit d'un secret qui apparaît dans la boîte de dialogue "Configure Application Credentials" de l'assistant "Add Application Group Wizard".
* Revendication de groupe : groupes

image:adfs15.png[adfs]

image:adfs16.png[adfs]

image:adfs17.png[adfs]
