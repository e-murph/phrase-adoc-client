= OpenID Connect (OIDC) für ADFS
:revdate1: 2024-09-27
:page-revdate: {revdate}
:page-opendocs-origin: /08.integration/08.oidc_adfs/08.oidc_adfs.md
:page-opendocs-slug:  /integration/oidc_adfs

== Integration mit OpenID Connect (OIDC) für ADFS

Klicken Sie in der AD FS-Verwaltung auf "Anwendungsgruppen" und dann auf "Anwendungsgruppe hinzufügen...".

image:adfs1.png[adfs]

Geben Sie einen Namen ein, wählen Sie "Serveranwendung, die auf eine Web-API zugreift" und klicken Sie dann auf Weiter

image:adfs2.png[adfs]

Geben Sie die Redirect URI auf der Seite {product-name} Settings > OpenID Connect Setting ein und klicken Sie dann auf Next

image:adfs3.png[adfs]

Aktivieren Sie das Kontrollkästchen "Gemeinsames Geheimnis generieren" und klicken Sie dann auf Weiter

image:adfs4.png[adfs]

Geben Sie die im vorherigen Schritt erstellte Kennung ein und klicken Sie dann auf Weiter

image:adfs5.png[adfs]

image:adfs6.png[adfs]

Aktivieren Sie die Bereiche allatclaims, E-Mail, openid und Profil und klicken Sie dann auf Weiter

image:adfs7.png[adfs]

image:adfs8.png[adfs]

image:adfs9.png[adfs]

Doppelklicken Sie auf eine Anwendungsgruppe, die Sie zuvor erstellt haben

image:adfs10.png[adfs]

Doppelklicken Sie auf Web-API und klicken Sie dann auf die Registerkarte Regeln für die Ausgabetransformation

image:adfs11.png[adfs]

Klicken Sie auf Add Rule... und wählen Sie "Send LDAP Attributes as Claims" und klicken Sie dann auf Next

image:adfs12.png[adfs]

Geben Sie einen Namen für die Anspruchsregel ein, wählen Sie Active Directory als Attributspeicher und geben Sie die Zuordnung von LDAP-Attributen zu ausgehenden Anspruchsarten wie folgt an

* Token-Gruppen -- Unqualifizierte Namen -> Gruppen
* Benutzer-Prinzipal-Name -> bevorzugter_benutzername
* E-Mail Adresse -> email

image:adfs13.png[adfs]

image:adfs14.png[adfs]

=== {product-name} Einrichtung

* Identitätsanbieter-Aussteller: "https://<adfs-fqdn>/adfs"
* Kunden-ID: Es handelt sich um einen "Client Identifier", der im Dialog "Server-Anwendung" im "Assistenten zum Hinzufügen von Anwendungsgruppen" angezeigt wird.
* Geheimnis des Kunden: Es handelt sich um ein Geheimnis, das im Dialogfeld "Configure Application Credentials" im "Add Application Group Wizard" angezeigt wird.
* Gruppenanspruch: Gruppen

image:adfs15.png[adfs]

image:adfs16.png[adfs]

image:adfs17.png[adfs]
